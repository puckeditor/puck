import { ConfigPreview } from "@/docs/components/Preview";

# Array

Render a list of items with a subset of fields. Extends [Base](base).

<ConfigPreview
  label="Example"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        arrayFields: {
          title: { type: "text" },
        },
      },
    },
    defaultProps: { items: [{ title: "Apple" }, { title: "Banana" }] },
    render: ({ items }) => {
      return (
        <ul>
          {items.map((item, i) => (
            <li key={i}>{item.title}</li>
          ))}
        </ul>
      );
    },
  }}
/>

```tsx {5-10} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
        },
      },
      render: ({ items }) => {
        return (
          <ul>
            {items.map((item, i) => (
              <li key={i}>{item.title}</li>
            ))}
          </ul>
        );
      },
    },
  },
};
```

## Params

| Param                                           | Example                                       | Type     | Status   |
| ----------------------------------------------- | --------------------------------------------- | -------- | -------- |
| [`type`](#type)                                 | `type: "array"`                               | "array"  | Required |
| [`arrayFields`](#arrayfields)                   | `arrayFields: { title: { type: "text" } }`    | Object   | Required |
| [`defaultItemProps`](#defaultitemprops)         | `defaultItemProps: { title: "Hello, world" }` | String   | -        |
| [`getItemSummary()`](#getitemsummaryitem-index) | `getItemSummary: (item) => item.title`        | Function | -        |
| [`max`](#max)                                   | `max: 3`                                      | Number   | -        |
| [`min`](#min)                                   | `min: 1`                                      | Number   | -        |

## Required params

### `type`

The type of the field. Must be `"array"` for Array fields.

```tsx {6} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
        },
      },
      // ...
    },
  },
};
```

### `arrayFields`

Describe the fields for each item in the array. Shares an API with `fields`.

Can include any field type, including nested array fields.

```tsx {7-9} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
        },
      },
      // ...
    },
  },
};
```

## Optional params

### `defaultItemProps`

Set the default values when a new item is added to the array.

```tsx {10-12} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          defaultItemProps: {
            title: "Hello, world",
          },
        },
      },
      // ...
    },
  },
};
```

<ConfigPreview
  label="Example"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        arrayFields: {
          title: { type: "text" },
        },
        defaultItemProps: {
          title: "Hello, world",
        },
      },
    },
    defaultProps: { items: [{ title: "Apple" }, { title: "Banana" }] },
    render: ({ items }) => {
      return (
        <ul>
          {items.map((item, i) => (
            <li key={i}>{item.title}</li>
          ))}
        </ul>
      );
    },
  }}
/>

### `getItemSummary(item, index)`

Get a label of each item in the array. Returns a [ReactNode](https://react.dev/learn/typescript#typing-children).

```tsx {10} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          getItemSummary: (item) => item.title || "Item",
        },
      },
      // ...
    },
  },
};
```

<ConfigPreview
  label="Example"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        arrayFields: {
          title: { type: "text" },
        },
        getItemSummary: (item) => item.title || "Item",
      },
    },
    defaultProps: { items: [{ title: "Apple" }, { title: "Banana" }] },
    render: ({ items }) => {
      return (
        <ul>
          {items.map((item, i) => (
            <li key={i}>{item.title}</li>
          ))}
        </ul>
      );
    },
  }}
/>

#### Using JSX for rich summaries

The `getItemSummary` function returns a [ReactNode](https://react.dev/learn/typescript#typing-children), which means you can use JSX for item summaries that include HTML elements and styling.

```tsx {11-18} copy
const config = {
  components: {
    Stats: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
            description: { type: "text" },
          },
          getItemSummary: (item, i) =>
            item.title && item.description ? (
              <p>
                {item.title} ({item.description})
              </p>
            ) : (
              `Feature #${i}`
            ),
        },
      },
      // ...
    },
  },
};
```

<ConfigPreview
  label="Stats with ReactElement summary"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        arrayFields: {
          title: { type: "text" },
          description: { type: "text" },
        },
        getItemSummary: (item, i) =>
          item.title && item.description ? (
            <p>
              {item.title} ({item.description})
            </p>
          ) : (
            `Feature #${i}`
          ),
      },
    },
    defaultProps: {
      items: [
        { title: "Users", description: "1,000" },
        { title: "Revenue", description: "$50K" },
      ],
    },
    render: ({ items }) => {
      return (
        <div style={{ display: "flex", gap: "20px" }}>
          {items.map((item, i) => (
            <div
              key={i}
              style={{
                textAlign: "center",
                padding: "16px",
                border: "1px solid #ccc",
                borderRadius: "8px",
              }}
            >
              <div style={{ fontSize: "24px", fontWeight: "bold" }}>
                {item.description}
              </div>
              <div style={{ fontSize: "14px", color: "#666" }}>
                {item.title}
              </div>
            </div>
          ))}
        </div>
      );
    },
  }}
/>

### `max`

The maximum amount of items allowed in the array.

```tsx {10-10} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          max: 3,
        },
      },
      // ...
    },
  },
};
```

<ConfigPreview
  label="Example"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        max: 3,
        arrayFields: {
          title: { type: "text" },
        },
      },
    },
    defaultProps: { items: [{ title: "Apple" }, { title: "Banana" }] },
    render: ({ items }) => {
      return (
        <ul>
          {items.map((item, i) => (
            <li key={i}>{item.title}</li>
          ))}
        </ul>
      );
    },
  }}
/>

### `min`

The minimum amount of items allowed in the array.

```tsx {10-10} copy
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          min: 1,
        },
      },
      // ...
    },
  },
};
```

<ConfigPreview
  label="Example"
  componentConfig={{
    fields: {
      items: {
        type: "array",
        min: 1,
        arrayFields: {
          title: { type: "text" },
        },
      },
    },
    defaultProps: { items: [{ title: "Apple" }, { title: "Banana" }] },
    render: ({ items }) => {
      return (
        <ul>
          {items.map((item, i) => (
            <li key={i}>{item.title}</li>
          ))}
        </ul>
      );
    },
  }}
/>
